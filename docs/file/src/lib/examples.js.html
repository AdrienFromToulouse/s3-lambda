<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/lib/examples.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/littlstar/s3renity" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/lib/examples.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;

var S3renity = require(&apos;S3renity&apos;);

var config = {
  access_key_id: &apos;access-key&apos;,
  secret_access_key: &apos;secret-access-key&apos;
};

var s3renity = new S3renity(config);
var s3dir = &apos;s3://&lt;bucket&gt;/path/to/folder/&apos;;


// list keys
s3renity
  .context(s3dir)
  .list()
  .then(keys =&gt; {
    console.log(keys);
  });


// join
s3renity
  .context(s3dir)
  .join(&apos;\n&apos;)
  .then(result =&gt;  console.log(result))
  .catch(e =&gt; console.log(e));


// forEach
// forEach with synchronous function
var a = o =&gt; {
  console.log(o);
};

s3renity
  .context(s3dir)
  .forEach(a)
  .then(s =&gt; console.log(&apos;done!&apos;))
  .catch(e =&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .forEach(a)
  .then(_ =&gt;  console.log(&apos;done!&apos;))
  .catch(e =&gt; console.log(e));

// forEach with async function
var b = o =&gt; {
  return new Promise((success, fail) =&gt; {
    setTimeout(function() {
      console.log(o);
      success(&apos;success message&apos;);
    }, 100);
  });
};

s3renity
  .context(s3dir)
  .forEach(b, true)
  .then(_ =&gt; console.log(&apos;done!&apos;))
  .catch(e =&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .forEach(b, true)
  .then(_ =&gt; console.log(&apos;done!&apos;))
  .catch(e =&gt; console.log(e));


// map
// map with synchronous function
var a = o =&gt; {
  return o + &apos; added text&apos;;
};

s3renity
  .context(s3dir)
  .map(a)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .map(a)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));

// map with async function
var b = o =&gt; {
  return new Promise((success, fail) =&gt; {
    setTimeout(function() {
      success(o + &apos; added text&apos;);
    }, 200);
  });
};

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .map(b, true)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));

s3renity
  .context(s3dir)
  .map(b, true)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));


// reduce
// reduce with sync function
var a = (p, c, k) =&gt; {
  if (p == null) return c;
  return p + c;
};

s3renity
  .context(s3dir)
  .reduce(a)
  .then(result =&gt; console.log(result))
  .catch(e=&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .reduce(a)
  .then(result =&gt; console.log(result))
  .catch(e=&gt; console.log(e));

// reduce with async function
var b = (p, c, k) =&gt; {
  return new Promise((success, fail) =&gt; {
    setTimeout(function() {
      if (p == null) {
        success(c);
      } else {
        success(p + c);
      }
    }, 100);
  });
};

s3renity
  .context(s3dir)
  .reduce(b, null, true)
  .then(result =&gt; console.log(result))
  .catch(e=&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .reduce(b, null, true)
  .then(result =&gt; console.log(result))
  .catch(e=&gt; console.log(e));


// filter
// filter with sync function
var a = b =&gt; {
  console.log(b[11]);
  if (b[11] == &apos;3&apos;) {
    return false;
  }
  return true;
};

s3renity
  .context(s3dir)
  .filter(a)
  .then(s=&gt; console.log(s))
  .catch(e=&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .filter(a)
  .then(s=&gt; console.log(s))
  .catch(e=&gt; console.log(e));

// filter with async function
var b = e =&gt; {
  return new Promise((success, fail) =&gt; {
    setTimeout(function() {
      if (e[11] == &apos;3&apos;) {
        success(false);
      } else {
        success(true);
      }
    }, 200);
  });
};

s3renity
  .context(s3dir)
  .filter(b, true)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));

s3renity
  .context(s3dir)
  .split(&apos;\n&apos;)
  .filter(b, true)
  .then(s =&gt; console.log(s))
  .catch(e =&gt; console.log(e));


// clean (delete empty files)
s3renity
  .context(s3dir)
  .clean()
  .then(_ =&gt; console.log(&apos;done!&apos;))
  .catch(e=&gt;console.log(e));

// write
// to single location
s3renity.write(&apos;body text&apos;, &apos;output1.txt&apos;);

// to multiple locations
s3renity.write(&apos;body text&apos;, [&apos;output2.txt&apos;, s3dir + &apos;output3.txt&apos;]);

// delete
// single file
s3renity
  .delete(&apos;your-bucket&apos;, &apos;path/to/file.txt&apos;)
  .then(_ =&gt; console.log(&apos;done&apos;))
  .catch(e =&gt; console.log(e));

// multiple files
s3renity
  .delete(&apos;your-bucket&apos;, [&apos;path/to/local/output1.txt&apos;, &apos;s3://path/to/output2.txt&apos;])
  .then(_ =&gt; console.log(&apos;done!&apos;))
  .catch(e =&gt; console.log(e));
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.3)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
